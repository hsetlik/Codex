(this["webpackJsonpcodex-client"]=this["webpackJsonpcodex-client"]||[]).push([[0],{126:function(e,t,n){},133:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},256:function(e,t,n){},270:function(e,t,n){},299:function(e,t,n){},333:function(e,t,n){},337:function(e,t,n){},406:function(e,t,n){},601:function(e,t,n){},604:function(e,t,n){"use strict";n.r(t);var r=n(64),a=n.n(r),c=(n(405),n(0)),o=(n(406),n(2)),s=n(16),i=n(4),l=n.n(i),u=n(6),d=n(3),j=n(120),f=n.n(j),h=n(249);f.a.defaults.baseURL="/api",f.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response,n=t.data,r=t.status,a=t.config;switch(r){case 400:if("get"===a.method&&n.errors.hasOwnProperty("id")&&console.log("Not Found"),n.errors){var c=[];for(var o in n.errors)n.errors[o]&&c.push(n.errors[o]);throw c.flat()}h.a.error(n);break;case 401:h.a.error("Unauthorized");break;case 404:h.a.error("NotFound");break;case 500:N.commonStore.setServerError(n)}})),f.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return e.headers=Object.assign({Authorization:"Bearer ".concat(t),"Sec-Fetch-Site":"cross-site"},e.headers),e}));var g=function(e){return e.data},b=function(e){return f.a.get(e).then(g)},m=function(e,t){return f.a.post(e,t).then(g)},v={Account:{current:function(){return b("/Account")},login:function(e){return m("/Account/login",e)},register:function(e){return m("/Account/register",e)}},Profile:{getUserProfiles:function(){return b("Profile/getUserProfiles")},allUserTerms:function(e){return m("profile/allUserTerms",e)},getMetricGraph:function(e){return m("/profile/getMetricGraph",e)},updateHistory:function(e){return m("profile/updateHistory",e)}},Content:{getLanguageContents:function(e){return m("/content/getLanguageContents",e)},getKnownWordsForContent:function(e){return m("/content/getKnownWordsForContent",e)},abstractTermsForElement:function(e){return m("/content/abstractTermsForElement",e)},getContentWithId:function(e){return m("/content/getContentWithId",e)},viewContent:function(e){return m("/content/viewContent",e)},getBookmark:function(e){return m("/content/getBookmark",e)},getSectionAtMs:function(e){return m("/content/getSectionAtMs",e)},saveContent:function(e){return m("/content/saveContent",e)},unsaveContent:function(e){return m("/content/unsaveContent",e)},getSavedContents:function(e){return m("content/getSavedContents",e)},addContentTag:function(e){return m("content/addContentTag",e)},getContentsWithTag:function(e){return m("content/getContentsWithTag",e)},getContentPageHtml:function(e){return b(e)},getContentDifficulty:function(e){return m("content/getContentDifficulty",e)}},UserTermEndpoints:{create:function(e){return m("/userTerm/createUserTerm",e)},addTranslation:function(e){return m("/userTerm/addTranslation",e)},getUserTerm:function(e){return m("/userTerm/getUserTerm",e)},updateUserTerm:function(e){return m("/userTerm/updateUserTerm",e)},getTranslations:function(e){return m("/userTerm/getTranslations",e)},deleteTranslation:function(e){return m("/userTerm/deleteTranslation",e)}},TermEndpoints:{getAbstractTerm:function(e){return m("/term/getAbstractTerm",e)}},Parse:{getSection:function(e){return m("/parse/getSection",e)},getContentMetadata:function(e){return m("/parse/getContentMetadata",e)},getHtml:function(e){return b("/parse/getHtml/".concat(e))}},Translate:{getTranslations:function(e){return m("translate/getTranslations",e)},getTranslation:function(e){return m("translate/getTranslation",e)}},CollectionAgent:{createCollection:function(e){return m("collection/createCollection",e)},deleteCollection:function(e){return m("collection/deleteCollection",e)},getCollection:function(e){return m("collection/getCollection",e)},updateCollection:function(e){return m("collection/updateCollection",e)},collectionsForLanguage:function(e){return m("collection/collectionsForLanguage",e)}},PhraseAgent:{createPhrase:function(e){return m("phrase/createPhrase",e)},getPhrase:function(e){return m("phrase/getPhraseDetails",e)},getAbstractPhrase:function(e){return m("phrase/getAbstractPhrase",e)},updatePhrase:function(e){return m("phrase/updatePhrase",e)}},FeedAgent:{getFeed:function(e){return m("feed/getFeed",e)}},CaptionAgent:{getCaptions:function(e){return m("video/getCaptions",e)}}},p=function(){function e(){var t=this;Object(o.a)(this,e),this.user=null,this.profilesLoaded=!1,this.languageProfiles=[],this.selectedProfile=null,this.login=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Starting login for user ".concat(n.email,", ").concat(n.password)),e.next=4,v.Account.login(n);case 4:return r=e.sent,console.log("User found: "+r.username),Object(s.h)((function(){t.user=r,console.log("User set"),console.log("User has token ".concat(r.token)),N.commonStore.setToken(r.token)})),e.next=9,v.Profile.getUserProfiles();case 9:a=e.sent,console.log("PROFILES FOUND"),Object(s.h)((function(){t.languageProfiles=a,t.profilesLoaded=!0;var e=t.languageProfiles.find((function(e){return e.language===r.lastStudiedLanguage})),n=void 0!==e?e:t.languageProfiles[0];t.selectedProfile=n,console.log("Selected profile has id ".concat(t.selectedProfile.languageProfileId," and language ").concat(t.selectedProfile.language,"}"))})),console.log(a),console.log(r),e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),this.logout=function(){console.log("Logging out..."),N.commonStore.setToken(null),window.localStorage.removeItem("jwt"),t.user=null,null!=window.localStorage.getItem("jwt")&&console.log("WARNING: TOKEN NOT DELETED!!")},this.setSelectedLanguage=function(e){console.log("Setting selected language: "+e),t.selectedProfile=t.languageProfiles.find((function(t){return t.language===e})),N.knownWordsStore.difficulties.size>0&&N.knownWordsStore.clearKnownWords()},this.setSelectedProfile=function(e){t.selectedProfile=e},this.getUser=Object(u.a)(l.a.mark((function e(){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.profilesLoaded=!1,e.prev=1,e.next=4,v.Account.current();case 4:return n=e.sent,e.next=7,v.Profile.getUserProfiles();case 7:r=e.sent,Object(s.h)((function(){t.languageProfiles=r,t.profilesLoaded=!0,t.user=n;var e=t.languageProfiles.find((function(e){return e.language===n.lastStudiedLanguage})),a=void 0!==e?e:t.languageProfiles[0];t.selectedProfile=a,console.log("Selected profile has id ".concat(t.selectedProfile.languageProfileId," and language ").concat(t.selectedProfile.language,"}"))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),this.register=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Account.register(n);case 3:r=e.sent,N.commonStore.setToken(r.token),Object(s.h)((function(){return t.user=r})),console.log(r),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),this.createTerm=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Creating term for: "+n.termValue),e.prev=1,e.next=4,v.UserTermEndpoints.create(n);case 4:return e.next=6,t.refreshByValue(n.termValue);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.updateUserTerm=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.termStore.refreshTerm(n),e.prev=1,e.next=4,v.UserTermEndpoints.updateUserTerm(n);case 4:return e.next=6,t.refreshByValue(n.termValue);case 6:console.log("Term seen ".concat(n.timesSeen," times")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),this.refreshByValue=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.TermEndpoints.getAbstractTerm({value:n,language:null===(r=t.selectedProfile)||void 0===r?void 0:r.language});case 3:c=e.sent,(null===(a=N.contentStore.selectedTerm)||void 0===a?void 0:a.termValue.toUpperCase())===n.toUpperCase()&&(console.log("Updating selected term with value ".concat(n)),o=N.contentStore.selectedTerm.termValue,c.termValue=o),Object(s.h)((function(){return N.termStore.refreshAbstractTerm(c)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteTranslation=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.UserTermEndpoints.deleteTranslation(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)}return Object(d.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),O=n(7),x=function(e){var t=e.getDate()+1,n=e.getMonth()+1,r=t>9?e.getDate().toString():"0".concat(e.getDate().toString()),a=n>9?(e.getMonth()+1).toString():"0".concat((e.getMonth()+1).toString());return"".concat(e.getFullYear(),"-").concat(a,"-").concat(r)},C=function(e){var t=new Date(e);return"".concat(t.getMonth()+1,"/").concat(t.getDate()+1)},T=["KnownWords","NumUserTerms"],y=function(){function e(){var t=this;Object(o.a)(this,e),this.feedLoaded=!1,this.currentFeed=null,this.loadFeed=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.feedLoaded=!1,e.prev=1,e.next=4,v.FeedAgent.getFeed({languageProfileId:n});case 4:r=e.sent,Object(s.h)((function(){t.currentFeed=r,t.feedLoaded=!0})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)}return Object(d.a)(e,[{key:"allContents",get:function(){var e,t=[],n=Object(O.a)(this.currentFeed.rows);try{for(n.s();!(e=n.n()).done;){var r,a=e.value,c=Object(O.a)(a.contents);try{for(c.s();!(r=c.n()).done;){var o=r.value;t.push(o)}}catch(s){c.e(s)}finally{c.f()}}}catch(s){n.e(s)}finally{n.f()}return t}}]),e}(),S=function(e,t){if(t.length<2)return!1;var n=t[0],r=t[t.length-1];return e>n.startMs&&e<=r.endMs},w=n(43),k=n(30),L=function(){function e(){var t=this;Object(o.a)(this,e),this.phraseMode=!1,this.phraseTerms=[],this.selectedAbstractPhrase=null,this.selectedTerm=null,this.metadataLoaded=!1,this.selectedContent={contentId:"null",contentUrl:"null",videoId:"null",audioUrl:"null",contentType:"null",contentName:"null",dateAdded:"null",language:"null",bookmark:0,numSections:0},this.elementTermMap=new Map,this.addTranslation=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.UserTermEndpoints.addTranslation(n);case 3:Object(s.h)((function(){var e;null===(e=t.selectedTerm)||void 0===e||e.translations.push(n.newTranslation)})),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.refreshTerm=function(e){var n;console.log("Refreshing term: ".concat(e.termValue));var r,a=Object(O.a)(t.elementTermMap);try{for(a.s();!(r=a.n()).done;){var c,o=r.value,s=Object(O.a)(o[1].abstractTerms);try{for(s.s();!(c=s.n()).done;){var i=c.value;if(i.termValue.toUpperCase()===e.termValue.toUpperCase()){var l=i.indexInChunk,u=i.leadingCharacters,d=i.trailingCharacters,j=i.termValue;(i=Object(k.a)(Object(k.a)({},i),e)).termValue=j,i.indexInChunk=l,i.trailingCharacters=d,i.leadingCharacters=u,console.log("value refreshed"),o[1].abstractTerms[l]=i}}}catch(h){s.e(h)}finally{s.f()}}}catch(h){a.e(h)}finally{a.f()}if((null===(n=t.selectedTerm)||void 0===n?void 0:n.termValue.toUpperCase())===e.termValue.toUpperCase()){var f=t.selectedTerm.termValue;t.selectedTerm=Object(k.a)(Object(k.a)({},t.selectedTerm),e),t.selectedTerm.termValue=f,console.log("value refreshed")}},this.refreshAbstractTerm=function(e){e.hasUserTerm||console.log("no refresh needed");var n=Object(k.a)({},e);console.log("Updating details for ".concat(e.termValue)),console.log(n),t.refreshTerm(n)},this.selectContentByIdAsync=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.metadataLoaded=!1,e.prev=1,e.next=4,v.Content.getContentWithId({contentId:n});case 4:r=e.sent,Object(s.h)((function(){t.selectedContent=r,console.log("New selected content has name: ".concat(r.contentName)),t.metadataLoaded=!0,t.elementTermMap.clear(),N.videoStore.reset()})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(s.h)((function(){t.metadataLoaded=!0,t.elementTermMap.clear()}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),this.loadElementAsync=function(){var e=Object(u.a)(l.a.mark((function e(n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Content.abstractTermsForElement({elementText:n,tag:r||"null",contentUrl:t.selectedContent.contentUrl,language:t.selectedContent.language});case 3:a=e.sent,Object(s.h)((function(){t.elementTermMap.set(n,a)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),this.parentElementOf=function(e){var n,r=Object(O.a)(t.allElements);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.abstractTerms.some((function(t){return t===e})))return a}}catch(c){r.e(c)}finally{r.f()}return null},this.selectTerm=function(e,n){if(n&&null!==t.selectedTerm){var r=t.parentElementOf(e);if(r===t.parentElementOf(t.selectedTerm)){var a=t.selectedTerm.indexInChunk,c=e.indexInChunk,o=a>c?c:a,s=a<=c?c:a;t.phraseTerms=r.abstractTerms.slice(o,s+1),t.phraseMode=!0}}else t.selectedTerm=e,t.phraseMode=!1,t.phraseTerms=[]},this.updatePhraseAsync=Object(u.a)(l.a.mark((function e(){var n,r,a,c,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n="",r=t.phraseTerms[t.phraseTerms.length-1],a=Object(O.a)(t.phraseTerms);try{for(a.s();!(c=a.n()).done;)"none"!==(o=c.value).leadingCharacters&&(n+=o.leadingCharacters),n+=o.termValue,"none"!==o.trailingCharacters&&(n+=o.trailingCharacters),o!==r&&(n+=" ")}catch(l){a.e(l)}finally{a.f()}return e.next=7,v.PhraseAgent.getAbstractPhrase({value:n,language:t.selectedContent.language});case 7:i=e.sent,Object(s.h)((function(){t.selectedAbstractPhrase=i})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])}))),Object(s.d)(this)}return Object(d.a)(e,[{key:"allTerms",get:function(){var e,t=[],n=Object(O.a)(this.elementTermMap);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(Object(w.a)(r[1].abstractTerms))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"allElements",get:function(){return Object(w.a)(this.elementTermMap.values())}}]),e}(),N={commonStore:new function e(){var t=this;Object(o.a)(this,e),this.error=null,this.token=localStorage.getItem("jwt"),this.appLoaded=!1,this.setServerError=function(e){t.error=e},this.setToken=function(e){console.log("setting token..."),t.token=e,e?(console.log("Setting token to: ".concat(e)),window.localStorage.setItem("jwt",e),console.log("Local token is ".concat(window.localStorage.getItem("jwt")))):console.log("Token is null!")},this.setAppLoaded=function(){t.appLoaded=!0},Object(s.d)(this),Object(s.g)((function(){return t.token}),(function(e){console.log("Checking token in common store..."),e?(window.localStorage.setItem("jwt",e),console.log("token saved to local storage")):(console.log("token is null!"),window.localStorage.removeItem("jwt"))}))},userStore:new p,modalStore:new function e(){var t=this;Object(o.a)(this,e),this.modal={open:!1,body:null},this.openModal=function(e){t.modal.open=!0,t.modal.body=e},this.closeModal=function(){t.modal.open=!1,t.modal.body=null},Object(s.d)(this)},contentStore:new function e(){var t=this;Object(o.a)(this,e),this.selectedTerm=null,this.termTranslationsLoaded=!1,this.selectedContentMetadata=null,this.selectedContentUrl="none",this.selectedSectionIndex=0,this.sectionLoaded=!1,this.currentSection=null,this.currentSectionTerms={contentUrl:"none",index:0,sectionHeader:"none",elementGroups:[]},this.phraseMode=!1,this.phraseTerms=[],this.currentAbstractPhrase=null,this.bufferSection=null,this.bufferSectionTerms={contentUrl:"none",index:0,sectionHeader:"none",elementGroups:[]},this.bufferLoaded=!1,this.savedContents=[],this.savedContentsLoaded=!1,this.selectTerm=function(e,n){t.termTranslationsLoaded=!1,n?console.log("shift is down!"):(t.phraseMode&&console.log("exiting phrase mode"),t.phraseMode=!1,t.phraseTerms=[]),t.selectedTerm=e},this.contentIsSaved=function(e){return t.savedContents.some((function(t){return t.contentUrl===e}))},this.toggleContentSaved=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.contentIsSaved(n)){e.next=12;break}return e.prev=1,e.next=4,v.Content.unsaveContent({contentUrl:n,languageProfileId:null===(r=N.userStore.selectedProfile)||void 0===r?void 0:r.languageProfileId});case 4:Object(s.h)((function(){t.savedContents=t.savedContents.filter((function(e){return e.contentUrl!==n}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:e.next=22;break;case 12:return e.prev=12,e.next=15,v.Content.saveContent({contentUrl:n,languageProfileId:null===(a=N.userStore.selectedProfile)||void 0===a?void 0:a.languageProfileId});case 15:return e.next=17,t.loadSavedContents(null===(c=N.userStore.selectedProfile)||void 0===c?void 0:c.languageProfileId);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(12),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[1,7],[12,19]])})));return function(t){return e.apply(this,arguments)}}(),this.loadSavedContents=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading saved contents for profile: ".concat(n)),t.savedContentsLoaded=!1,t.savedContents=[],e.prev=3,e.next=6,v.Content.getSavedContents({languageProfileId:n});case 6:r=e.sent,Object(s.h)((function(){t.savedContents=r,t.savedContentsLoaded=!0})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),Object(s.h)((function(){return t.savedContentsLoaded=!0}));case 14:console.log("Saved Contents loaded "),console.log(t.savedContents);case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),this.addTranslation=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.termTranslationsLoaded=!1,e.prev=1,e.next=4,v.UserTermEndpoints.addTranslation(n);case 4:Object(s.h)((function(){t.termTranslationsLoaded=!0})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("error"),Object(s.h)((function(){return t.termTranslationsLoaded=!0}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.createPhrase=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.PhraseAgent.createPhrase(n);case 3:return e.next=5,v.PhraseAgent.getAbstractPhrase({value:n.value,language:n.language});case 5:r=e.sent,Object(s.h)((function(){return t.currentAbstractPhrase=r})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),this.updateAbstractPhrase=Object(u.a)(l.a.mark((function e(){var n,r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n="",r=0;r<t.phraseTerms.length;++r)a=t.phraseTerms[r],r>0&&"none"!==a.leadingCharacters&&(n+=a.leadingCharacters),n+=a.termValue,"none"!==a.trailingCharacters&&(n+=a.trailingCharacters),r!==t.phraseTerms.length-1&&(n+=" ");return console.log("Updated Phrase vlaue is: ".concat(n)),e.prev=3,e.next=6,v.PhraseAgent.getAbstractPhrase({value:n,language:(null===(c=N.userStore.selectedProfile)||void 0===c?void 0:c.language)||"en"});case 6:o=e.sent,Object(s.h)((function(){return t.currentAbstractPhrase=o})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),this.addContentTag=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding Tag: ".concat(t.tagValue,", ").concat(t.tagLanguage,", ").concat(t.contentId)),e.prev=1,e.next=4,v.Content.addContentTag(t);case 4:Object(s.h)((function(){var e,n=Object(O.a)(N.feedStore.allContents);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.contentId===t.contentId&&(r.contentTags||(r.contentTags=[]),r.contentTags.push(t.tagValue))}}catch(a){n.e(a)}finally{n.f()}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},profileStore:new function e(){var t=this;Object(o.a)(this,e),this.userTermsLoaded=!1,this.currentUserTerms=[],this.currentLanguage="",this.loadProfile=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.userTermsLoaded=!1,e.prev=1,e.next=4,v.Profile.allUserTerms({language:n});case 4:r=e.sent,Object(s.h)((function(){t.userTermsLoaded=!0,t.currentUserTerms=r,t.currentLanguage=n,N.userStore.setSelectedLanguage(n)})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),Object(s.h)((function(){t.userTermsLoaded=!0,t.currentUserTerms=[],t.currentLanguage=n}));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},translationStore:new function e(){var t=this;Object(o.a)(this,e),this.translationsLoaded=!1,this.currentTermValue={termValue:"",language:""},this.currentTranslations=[],this.reccomendedLoaded=!1,this.reccomendedTranslation={value:"null",annotation:"null"},this.clear=function(){t.reccomendedTranslation={value:"null",annotation:"null"}},this.prepareForTerm=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.translationsLoaded=!1,t.currentTranslations=[],e.prev=2,e.next=5,v.Translate.getTranslations({value:n.termValue,language:n.language});case 5:r=e.sent,Object(s.h)((function(){t.currentTranslations=r,t.currentTermValue=n,t.translationsLoaded=!0})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),Object(s.h)((function(){t.translationsLoaded=!0}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.loadReccomended=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reccomendedLoaded=!1,t.clear(),e.prev=2,e.next=5,v.Translate.getTranslation(n);case 5:r=e.sent,Object(s.h)((function(){t.reccomendedTranslation={value:r.responseValue,annotation:"null"},t.currentTermValue={termValue:n.queryValue,language:n.queryLanguage},t.reccomendedLoaded=!0})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),Object(s.h)((function(){return t.reccomendedLoaded=!0}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},knownWordsStore:new function e(){var t=this;Object(o.a)(this,e),this.difficulties=new Map,this.loadKnownWordsFor=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Content.getContentDifficulty({contentId:n,languageProfileId:(null===(r=N.userStore.selectedProfile)||void 0===r?void 0:r.languageProfileId)||"null"});case 3:a=e.sent,Object(s.h)((function(){t.difficulties.set(n,a)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.clearKnownWords=function(){t.difficulties.clear()},Object(s.d)(this)},dailyDataStore:new function e(){var t=this;Object(o.a)(this,e),this.graphLoaded=!1,this.currentGraph=null,this.currentMetricName=T[0],this.currentNumDays=7,this.loadMetricGraph=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),t.graphLoaded=!1,e.prev=2,e.next=5,v.Profile.getMetricGraph(n);case 5:r=e.sent,Object(s.h)((function(){t.currentGraph=r,t.graphLoaded=!0,console.log("Graph loaded: ".concat(t.currentGraph.metricName)),console.log("Start string: ".concat(t.currentGraph.start)),console.log("End string: ".concat(t.currentGraph.end))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.setCurrentMetricName=function(e){t.currentMetricName=e},this.setCurrentNumDays=function(e){t.currentNumDays=e},Object(s.d)(this)},collectionStore:new function e(){var t=this;Object(o.a)(this,e),this.collectionsLoaded=!1,this.currentCollections=new Map,this.currentCollectionsLanguage="none",this.loadCollectionsForLanguage=function(){var e=Object(u.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.collectionsLoaded=!1,t.currentCollections.clear(),e.prev=2,e.next=5,v.CollectionAgent.collectionsForLanguage({language:n,enforceVisibility:!1});case 5:r=e.sent,Object(s.h)((function(){t.currentCollectionsLanguage=n,t.collectionsLoaded=!0;var e,a=Object(O.a)(r);try{for(a.s();!(e=a.n()).done;){var c=e.value;t.currentCollections.set(c.collectionId,c)}}catch(o){a.e(o)}finally{a.f()}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),Object(s.h)((function(){return t.collectionsLoaded=!0})),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.addToCollection=function(){var e=Object(u.a)(l.a.mark((function e(n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.currentCollections.get(n)).contents.push(r),e.prev=2,e.next=5,v.CollectionAgent.updateCollection(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),this.removeFromCollection=function(){var e=Object(u.a)(l.a.mark((function e(n,r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.currentCollections.get(n)).contents=a.contents.filter((function(e){return e.contentId!==r.contentId})),e.prev=2,e.next=5,v.CollectionAgent.updateCollection(a);case 5:Object(s.h)((function(){return t.currentCollections.set(n,a)})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),this.createCollection=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.CollectionAgent.createCollection(n);case 3:Object(s.h)((function(){return t.loadCollectionsForLanguage(t.currentCollectionsLanguage)})),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),Object(s.h)((function(){return t.loadCollectionsForLanguage(t.currentCollectionsLanguage)}));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.deleteCollection=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.currentCollections.delete(n),e.prev=1,e.next=4,v.CollectionAgent.deleteCollection({collectionId:n});case 4:Object(s.h)((function(){return t.loadCollectionsForLanguage(t.currentCollectionsLanguage)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0),Object(s.h)((function(){return t.loadCollectionsForLanguage(t.currentCollectionsLanguage)}));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},phraseStore:new function e(){var t=this;Object(o.a)(this,e),this.currentPhrase=null,this.currentSelectedTerms=[],this.phraseMode=!1,this.updatePhrase=function(e,n){t.phraseMode&&t.currentSelectedTerms[t.currentSelectedTerms.length-1]===e?t.currentSelectedTerms.push(n):t.startPhraseMode(e,n)},this.startPhraseMode=function(e,n){console.log("starting phrase mode"),t.currentSelectedTerms=[e,n],t.phraseMode=!0},this.exitPhraseMode=function(){t.currentSelectedTerms=[],t.currentPhrase=null,t.phraseMode=!1,console.log("finished phrase mode")},this.createPhrase=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},tagStore:new function e(){var t=this;Object(o.a)(this,e),this.tagContentsLoaded=!1,this.tagContents=[],this.currentTag=null,this.loadTag=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tagContentsLoaded=!1,c={tagValue:n,tagLanguage:(null===(r=N.userStore.user)||void 0===r?void 0:r.nativeLanguage)||"en",contentLanguage:(null===(a=N.userStore.selectedProfile)||void 0===a?void 0:a.language)||"en"},e.prev=2,e.next=5,v.Content.getContentsWithTag(c);case 5:o=e.sent,Object(s.h)((function(){t.tagContentsLoaded=!0,t.tagContents=o,t.currentTag=c})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),Object(s.h)((function(){return t.tagContentsLoaded=!0}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},articleStore:new function e(){var t=this;Object(o.a)(this,e),this.htmlLoaded=!1,this.currentPageHtml=null,this.loadPage=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.htmlLoaded=!1,t.currentPageHtml=null,e.prev=2,e.next=5,N.termStore.selectContentByIdAsync(n);case 5:return r=N.termStore.selectedContent,console.log("parameter ID: ".concat(n,", selected content ID: ").concat(r.contentId)),e.next=9,v.Parse.getHtml(n);case 9:a=e.sent,Object(s.h)((function(){var e;t.currentPageHtml=a,t.htmlLoaded=!0,(null===(e=N.userStore.selectedProfile)||void 0===e?void 0:e.language)!==r.language&&N.userStore.setSelectedLanguage(r.language)})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),Object(s.h)((function(){return t.htmlLoaded=!0})),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},feedStore:new y,videoStore:new function e(){var t=this;Object(o.a)(this,e),this.currentCaptionsLoaded=!1,this.currentCaptions=[],this.highlightedCaption=null,this.reset=function(){t.currentCaptions=[],t.currentCaptionsLoaded=!1},this.loadForMs=function(){var e=Object(u.a)(l.a.mark((function e(n){var r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t.currentCaptionsLoaded||!S(n,t.currentCaptions)){e.next=3;break}return t.highlightedCaption=t.currentCaptions.find((function(e){return e.startMs<=n&&e.endMs>n}))||null,e.abrupt("return");case 3:return t.currentCaptionsLoaded=!1,e.prev=4,r=N.termStore.selectedContent.videoId,a=N.termStore.selectedContent.language,console.log("requesting captions for language: ".concat(a," and video ID : ").concat(r)),e.next=10,v.CaptionAgent.getCaptions({fromMs:Math.round(n),videoId:r,language:a,numCaptions:10});case 10:c=e.sent,Object(s.h)((function(){t.currentCaptions=c,t.currentCaptionsLoaded=!0,console.log("New captions loaded at ".concat(n))})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0),Object(s.h)((function(){return t.currentCaptionsLoaded=!0}));case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),Object(s.d)(this)},termStore:new L},P=Object(c.createContext)(N);function I(){return Object(c.useContext)(P)}var U=n(28),V=n(624),M=n(41),A=n(635),E=n(622),F=n(93),D=n(13),W=(n(200),n(634)),q=[{iso:"fr",fullName:"French"},{iso:"en",fullName:"English"},{iso:"ar",fullName:"Arabic"},{iso:"es",fullName:"Spanish"},{iso:"de",fullName:"German"},{iso:"zh",fullName:"Chinese"},{iso:"hi",fullName:"Hindi"},{iso:"bn",fullName:"Bengail"},{iso:"ja",fullName:"Japanese"},{iso:"tr",fullName:"Turkish"},{iso:"ru",fullName:"Russian"}],B=[{lang:"fr",flag:"fr"},{lang:"en",flag:"gb"},{lang:"ar",flag:"sa"},{lang:"es",flag:"es"},{lang:"de",flag:"de"},{lang:"zh",flag:"cn"},{lang:"hi",flag:"in"},{lang:"bn",flag:"in"},{lang:"ja",flag:"jp"},{lang:"tr",flag:"tr"},{lang:"ru",flag:"ru"}];function G(e){var t,n=Object(O.a)(q);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.iso===e)return r.fullName}}catch(a){n.e(a)}finally{n.f()}return"Language not found!"}n(133);var R=n(1);function H(e){var t=e.onChange||function(e){console.log(e)},n=[];return e.options.forEach((function(e){return n.push(function(e){var t;return{key:e,text:G(e),flag:(null===(t=B.find((function(t){return t.lang===e})))||void 0===t?void 0:t.flag)||"us",value:e}}(e))})),Object(R.jsx)(W.a,{text:"Language",options:n,onChange:function(e,n){var r;r=n.value,t(r)}})}var z=Object(D.a)((function(){var e,t=I().userStore,n=Object(U.f)(),r=t.languageProfiles,a=t.setSelectedLanguage,c=[],o=Object(O.a)(r);try{for(o.s();!(e=o.n()).done;){var s=e.value;c.push(s.language)}}catch(i){o.e(i)}finally{o.f()}return Object(R.jsx)(H,{options:c,onChange:function(e){a(e),n("/feed/".concat(e))}})})),K=n(621),J=Object(D.a)((function(){var e=I().userStore.selectedProfile,t=function(e){var t;return null===(t=B.find((function(t){return t.lang===e})))||void 0===t?void 0:t.flag}((null===e||void 0===e?void 0:e.language)||"en");return Object(R.jsx)(A.a.Item,{children:Object(R.jsx)(K.a,{name:t})})})),_=function(e){return"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b," )")},Y={r:1,g:0,b:80},Q={r:83,g:74,b:173},X={r:255,g:182,b:77},Z={r:200,g:135,b:26},$={r:254,g:233,b:124},ee={r:224,g:226,b:224},te={r:244,g:244,b:246},ne={r:255,g:255,b:255},re={r:0,g:0,b:0},ae={backgroundColor:_({r:25,g:35,b:125}),color:_(ne)},ce={backgroundColor:_(Y),color:_(ne)},oe={Primary:ae,PrimaryLight:{backgroundColor:_(Q),color:_(ne)},PrimaryDark:ce,Secondary:{backgroundColor:_(X),color:_(re)},SecondaryLight:{backgroundColor:_($),color:_(re)},SecondaryDark:{backgroundColor:_(Z),color:_(re)},Background:{backgroundColor:_(ee),color:_(re)},Surface:{backgroundColor:_(te),color:_(re)}};function se(){return Object(R.jsx)("div",{})}var ie,le=Object(D.a)((function(){var e,t=I(),n=t.userStore,r=n.user,a=n.logout,c=n.isLoggedIn,o=n.selectedProfile,s=t.modalStore,i=Object(U.f)(),l=null===o||void 0===o?void 0:o.language;return e=c?Object(R.jsx)(A.a.Item,{as:M.b,to:"/profiles/".concat(null===r||void 0===r?void 0:r.username,"/").concat(l),name:null===r||void 0===r?void 0:r.displayName,style:{position:""}}):Object(R.jsx)(A.a.Item,{as:M.b,to:"/account/login",content:"Login"}),Object(R.jsx)(A.a,{inverted:!0,fixed:"top",className:"codex-nav-bar",style:oe.PrimaryDark,children:Object(R.jsxs)(E.a,{children:[c&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(A.a.Item,{as:M.b,to:"feed/".concat(l),children:Object(R.jsx)(F.a,{name:"home"})}),Object(R.jsx)(J,{}),Object(R.jsx)(A.a.Item,{children:Object(R.jsx)(z,{})}),Object(R.jsx)(A.a.Item,{as:M.b,to:"/collections/".concat(l),children:"Browse"}),Object(R.jsx)(A.a.Item,{onClick:function(){return s.openModal(Object(R.jsx)(se,{}))},children:"Import"})]}),Object(R.jsx)(A.a.Item,{position:"right",children:e}),Object(R.jsx)(A.a.Item,{name:"Logout",onClick:function(){i("/"),a()}})]})})})),ue=(n(256),n(625)),de=n(626),je=n(18),fe=n(633),he=n(277),ge=n(356),be=(n(201),n(357).a.label(ie||(ie=Object(ge.a)(["\n    font-size: small;\n    font-family: 'Lato';\n    font-weight: bold;\n    padding: 0.45em;\n    text-align: center;\n    cursor: pointer;\n    background-color: rgb(66, 64, 64);\n    color: rgb(241, 240, 240);\n    padding-top: 0.25em;\n    padding-bottom: 0.25em;\n    border-radius: 0.4em;\n    &:hover{\n        padding: 0.50em;\n        background-color: rgb(122, 121, 121);\n    }\n"]))));function me(e){var t=e.onClick;return t?Object(R.jsx)(be,{onClick:t,children:"Add Tag +"}):Object(R.jsx)(be,{children:"Add Tag +"})}var ve=n(643),pe=n(623),Oe=n(605),xe=Object(D.a)((function(e){var t,n=e.content,r=e.closePopup,a=I(),o=a.userStore,s=a.contentStore.addContentTag,i=(null===(t=o.user)||void 0===t?void 0:t.nativeLanguage)||"en",l=Object(c.useState)(""),u=Object(je.a)(l,2),d=u[0],j=u[1];return Object(R.jsxs)("div",{children:[Object(R.jsx)(ve.a,{content:"New Tag:",as:"h3"}),Object(R.jsx)(pe.a,{onChange:function(e,t){return j(t.value)},style:{"margin-bottom":10}}),Object(R.jsx)(Oe.a,{size:"mini",content:"Add",onClick:function(){return s({tagValue:d,tagLanguage:i,contentId:n.contentId}),void(r&&r())}})]})}));function Ce(e){var t=e.content,n=Object(c.createRef)(),r=Object(c.useState)(!1),a=Object(je.a)(r,2),o=a[0],s=a[1];return Object(R.jsx)(fe.a,{openOnTriggerClick:!0,openOnTriggerMouseEnter:!1,closeOnTriggerMouseLeave:!1,closeOnDocumentClick:!0,ref:n,trigger:Object(R.jsx)(me,{}),open:o,onOpen:function(e,t){s(!0)},children:Object(R.jsx)(he.a,{children:Object(R.jsx)(xe,{content:t,closePopup:function(){s(!1)}})})})}var Te=Object(D.a)((function(e){var t=e.content,n=Object(U.f)(),r=t.contentName.length>60?t.contentName.substring(0,57)+"...":t.contentName,a="Youtube"===t.contentType?"/video/".concat(t.contentId):"/viewer/".concat(t.contentId);return Object(R.jsxs)(V.a,{fluid:!0,className:"feed-item-container",style:oe.Surface,children:[Object(R.jsx)(ue.a,{className:"header-row",children:Object(R.jsxs)(de.a,{children:[Object(R.jsx)("h3",{style:oe.Primary,className:"title-text",onClick:function(){n(a)},children:r}),Object(R.jsx)("label",{children:t.contentType}),Object(R.jsx)("div",{children:t.creatorUsername&&Object(R.jsx)("label",{children:"Uploaded by: ".concat(t.creatorUsername)})}),t.description&&Object(R.jsx)("p",{className:"description-p",children:t.description})]})}),Object(R.jsx)(ue.a,{children:t.contentTags&&Object(R.jsxs)(de.a,{className:"tag-list",children:[Object(R.jsx)("h3",{className:"feed-h3",children:"Tags:"}),t.contentTags.map((function(e){return Object(R.jsx)("div",{children:Object(R.jsx)("button",{className:"tag-button",onClick:function(){return function(e){n("/tags/".concat(e))}(e)},style:oe.Secondary,children:e},e)},e)})),Object(R.jsx)(Ce,{content:t})]})})]})}));function ye(e){var t=e.row;return Object(R.jsx)(ue.a,{children:t.contents.length>0&&t.contents.map((function(e){return Object(R.jsx)(de.a,{children:Object(R.jsx)(Te,{content:e})},e.contentId)}))})}var Se=[{value:"Newest",display:"Newest"},{value:"RecentlyViewed",display:"Recently Viewed"},{value:"MostViewed",display:"Most Viewed"}],we=Object(D.a)((function(){var e=Object(U.g)().lang||"null",t=I(),n=t.feedStore,r=t.userStore,a=r.selectedProfile,o=r.setSelectedLanguage,s=(Object(U.f)(),n.feedLoaded),i=n.currentFeed,l=n.loadFeed;return Object(c.useEffect)((function(){(null===a||void 0===a?void 0:a.language)!==e?o(e):s&&(null===i||void 0===i?void 0:i.languageProfileId)===a.languageProfileId||l(a.languageProfileId)}),[e,a,o,s,l,i]),s&&null!==i?Object(R.jsx)(V.a,{fluid:!0,children:i.rows.map((function(e){var t;return Object(R.jsxs)("div",{children:[Object(R.jsx)("h2",{children:null===(t=Se.find((function(t){return t.value===e.feedType})))||void 0===t?void 0:t.display}),Object(R.jsx)(ye,{row:e})]},i.rows.indexOf(e)||0)}))}):Object(R.jsx)(V.a,{})})),ke=n(38),Le=n(191),Ne=n(636);function Pe(e){var t=Object(ke.e)(e.name),n=Object(je.a)(t,2),r=n[0],a=n[1];return Object(R.jsxs)(Ne.a.Field,{error:a.touched&&!!a.error,children:[Object(R.jsx)("label",{children:e.label}),Object(R.jsx)("input",Object(k.a)(Object(k.a)({},r),e)),a.touched&&a.error?Object(R.jsx)(Le.a,{basic:!0,color:"red",children:a.error}):null]})}var Ie=Object(D.a)((function(){var e=I().userStore,t=Object(U.f)();return Object(R.jsx)(ke.d,{initialValues:{email:"",password:"",error:null},onSubmit:function(n,r){var a=r.setErrors;return e.login(n).then((function(){return t("/feed")})).catch((function(e){return a({error:"Invalid email or password"})}))},children:function(t){var n=t.handleSubmit,r=t.isSubmitting,a=t.errors;return Object(R.jsxs)(ke.c,{className:"ui form",onSubmit:n,autoComplete:"off",children:[Object(R.jsx)(ve.a,{as:"h2",content:"Login",color:"teal",textAlign:"center"}),Object(R.jsx)(Pe,{name:"email",placeholder:"Email"}),Object(R.jsx)(Pe,{name:"password",placeholder:"Password",type:"password"}),Object(R.jsx)(ke.a,{name:"error",render:function(){return Object(R.jsx)(Le.a,{style:{marginBottom:10},basic:!0,color:"red",content:a.error})}}),Object(R.jsx)(Oe.a,{loading:r,positive:!0,content:"Login",type:"submit",fluid:!0,onClick:function(){var t;null===(t=e.selectedProfile)||void 0===t||t.language}})]})}})})),Ue=(n(299),n(361)),Ve=n.n(Ue);function Me(){return Object(R.jsx)("div",{className:"particle-container",children:Object(R.jsx)(Ve.a,{id:"tsparticles",options:{particles:{number:{value:85,limit:100},shape:{type:"circle"},size:{value:15,random:!0,anim:{enable:!0,speed:10,size_min:10,sync:!1}},move:{enable:!0,speed:.8,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1},lineLinked:{enable:!0,size:3,distance:150,frequency:.8}},retina_detect:!0,fps_limit:30}})})}var Ae=Object(D.a)((function(){var e,t=Object(U.f)(),n=I().userStore;n.isLoggedIn&&t("/feed/".concat(null===(e=n.selectedProfile)||void 0===e?void 0:e.language));return Object(R.jsxs)("div",{children:[Object(R.jsx)(Me,{}),Object(R.jsxs)("div",{className:"container particle-foreground",children:[Object(R.jsxs)("div",{className:"conatiner row",children:[Object(R.jsx)("h1",{className:"display-1 landing-header",children:"Welcome to Codex"}),Object(R.jsx)("h3",{className:"landing-header",children:"Language learning for the real world"})]}),Object(R.jsx)("div",{className:"container row",children:Object(R.jsx)("a",{className:"btn btn-primary landing-button",href:"/account/login",children:"Login"})}),Object(R.jsx)("div",{className:"container row",children:Object(R.jsx)("a",{className:"btn btn-primary landing-button",href:"/account/register",children:"Register"})})]})]})})),Ee=n(121),Fe=n(640);function De(e){var t=e.errors;return Object(R.jsx)(Fe.a,{error:!0,children:t&&Object(R.jsx)(Fe.a.List,{children:t.map((function(e,t){return Object(R.jsx)(Fe.a.Item,{children:e},t)}))})})}var We=n(91),qe=["field","form","options","children"],Be=function(e){var t=e.field,n=t.name,r=t.value,a=e.form,c=a.touched,o=a.errors,s=a.setFieldValue,i=e.options,l=(e.children,Object(We.a)(e,qe)),u=c[n]&&o[n];return Object(R.jsx)(W.a,Object(k.a)({selection:!0,options:i,value:r,onChange:function(e,t){var r=t.value;return s(n,r)},error:u},l))};function Ge(e){var t=e.name,n=e.placeholder,r=q.map((function(e){return{value:e.iso,text:e.fullName}}));return Object(R.jsx)(ke.b,{placeholder:n||"Select Language",options:r,name:t,component:Be})}var Re=Object(D.a)((function(){var e=I().userStore;return Object(R.jsx)(ke.d,{initialValues:{email:"",password:"",error:null,displayName:"",username:"",nativeLanguage:"en",studyLanguage:""},onSubmit:function(t,n){var r=n.setErrors;e.register(t).catch((function(e){r({error:e})}))},validationSchema:Ee.a({displayName:Ee.b().required(),username:Ee.b().required(),email:Ee.b().required().email(),password:Ee.b().required(),nativeLanguage:Ee.b().required(),studyLanguage:Ee.b().required()}),children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors,a=e.isValid,c=e.dirty;return Object(R.jsxs)(ke.c,{className:"ui form error",onSubmit:t,autoComplete:"off",children:[Object(R.jsx)(ve.a,{as:"h2",content:"Sign up to Reactivities",color:"teal",textAlign:"center"}),Object(R.jsx)(Pe,{name:"displayName",placeholder:"Display Name"}),Object(R.jsx)("div",{children:Object(R.jsx)(Ge,{name:"nativeLanguage",placeholder:"Native Language"})}),Object(R.jsx)("div",{children:Object(R.jsx)(Ge,{name:"studyLanguage",placeholder:"Study Language"})}),Object(R.jsx)(Pe,{name:"username",placeholder:"Username"}),Object(R.jsx)(Pe,{name:"email",placeholder:"Email"}),Object(R.jsx)(Pe,{name:"password",placeholder:"Password",type:"password"}),Object(R.jsx)(ke.a,{name:"error",render:function(){return Object(R.jsx)(De,{errors:r.error})}}),Object(R.jsx)(Oe.a,{disabled:!a||!c||n,loading:n,positive:!0,content:"Register",type:"submit",fluid:!0})]})}})})),He=n(632),ze=n(644),Ke=n(627),Je=n(385),_e=n(631),Ye=n(377),Qe=n(378),Xe=Object(D.a)((function(e){var t=e.metricName,n=e.days,r=e.profileId;console.log("range is ".concat(n," days"));var a=I().dailyDataStore,o=a.currentGraph,s=a.graphLoaded,i=a.loadMetricGraph,l=function(e,t,n){var r=new Date(Date.now()),a=864e5*t;console.log("End date is: ".concat(r));var c=new Date(Date.now()-a);return{metricName:e,languageProfileId:n,start:x(c),end:x(r)}}(t,n,r),u=x(new Date(null===o||void 0===o?void 0:o.start)),d=x(new Date(null===o||void 0===o?void 0:o.end));if(console.log("query start string is: ".concat(l.start)),console.log("query end string is: ".concat(l.end)),console.log("current start string is: ".concat(u)),console.log("current end string is: ".concat(d)),Object(c.useEffect)((function(){s&&(null===o||void 0===o?void 0:o.metricName)===t&&l.start===u||(i(l),console.log("Loaded Graph"))}),[l,i,s,o,t,u]),!s||null==o)return Object(R.jsx)("div",{});var j,f=function(e){var t,n=[],r=0,a=Object(O.a)(e.dataPoints);try{for(a.s();!(t=a.n()).done;){var c=t.value;n.push({date:C(c.dateTime),uv:parseInt(c.valueString),idx:r}),r++}}catch(o){a.e(o)}finally{a.f()}return n}(o),h=Object(O.a)(f);try{for(h.s();!(j=h.n()).done;){var g=j.value;console.log("Datapoint for ".concat(g.date," has value ").concat(g.uv," and index ").concat(g.idx))}}catch(b){h.e(b)}finally{h.f()}return Object(R.jsx)(E.a,{children:Object(R.jsxs)(Ke.a,{data:f,width:.45*window.screen.availWidth,height:.45*window.screen.availHeight,children:[Object(R.jsx)(Je.a,{type:"monotone",dataKey:"uv",stroke:"#8884d8"}),Object(R.jsx)(_e.a,{stroke:"#ccc"}),Object(R.jsx)(Ye.a,{dataKey:"date"}),Object(R.jsx)(Qe.a,{dataKey:"uv"})]})})})),Ze=Object(D.a)((function(){var e=I().dailyDataStore,t=e.currentMetricName,n=e.setCurrentMetricName;return Object(R.jsx)(A.a,{vertical:!1,attached:"top",children:T.map((function(e){return Object(R.jsx)(A.a.Item,{active:t===e,onClick:function(){return n(e)},children:e},e)}))})})),$e=[7,14,30,90],et=Object(D.a)((function(){var e=I().dailyDataStore,t=e.setCurrentNumDays,n=e.currentNumDays,r=function(e){return"Last ".concat(e," days")};return Object(R.jsx)(W.a,{value:r(n),placeholder:r(n),style:{marginTop:"10px"},children:Object(R.jsx)(W.a.Menu,{children:$e.map((function(e){return Object(R.jsx)(W.a.Item,{onClick:function(){return t(e)},children:r(e)},e)}))})})})),tt=Object(D.a)((function(e){var t=e.profileId,n=I().dailyDataStore,r=n.currentMetricName,a=n.currentNumDays;return Object(R.jsxs)(E.a,{children:[Object(R.jsxs)(ze.a,{children:[Object(R.jsx)(Ze,{}),Object(R.jsx)(et,{})]}),Object(R.jsx)(Xe,{profileId:t,metricName:r,days:a})]})})),nt=n(641),rt=n(188),at=Object(ke.f)({mapPropsToValues:function(e){return{collectionName:"Name",description:"Description",isPrivate:!1,language:e.language,creatorUsername:e.creatorUsername,firstContentUrl:e.firstContentUrl,submitMethod:e.submitMethod}},validate:function(e){var t={};return e.collectionName.length<2&&(t.collectionName="Name must be at least 2 letters long!"),t},handleSubmit:function(e){var t={creatorUsername:e.creatorUsername,isPrivate:e.isPrivate,language:e.language,collectionName:e.collectionName,description:e.description,firstContentUrl:e.firstContentUrl};e.submitMethod(t)}})((function(e){var t=e.touched,n=e.errors,r=e.isSubmitting;return Object(R.jsx)(ke.c,{children:Object(R.jsxs)(Ne.a,{children:[Object(R.jsx)(Pe,{type:"text",name:"collectionName",className:"codex-text-input"}),t.collectionName&&n.collectionName&&Object(R.jsx)(Le.a,{children:n.collectionName}),Object(R.jsx)(Pe,{type:"text",name:"description",className:"codex-text-input"}),t.description&&n.description&&Object(R.jsx)("div",{children:n.description}),Object(R.jsx)(Ne.a.Checkbox,{type:"checkbox",name:"isPrivate",label:"Private"}),Object(R.jsx)(Oe.a,{type:"submit",disabled:r,content:"Create"})]})})})),ct=Object(D.a)((function(e){var t=e.contentUrl,n=I(),r=n.userStore,a=r.user,c=r.selectedProfile,o=n.collectionStore.createCollection;return Object(R.jsx)(at,{firstContentUrl:t,language:null===c||void 0===c?void 0:c.language,creatorUsername:null===a||void 0===a?void 0:a.username,submitMethod:o})})),ot=Object(D.a)((function(e){var t,n=e.content,r=I(),a=r.collectionStore,o=r.userStore,s=a.currentCollections,i=a.addToCollection,l=a.removeFromCollection,u=(null===(t=o.user)||void 0===t?void 0:t.username)||"null",d=Object(c.useState)(!1),j=Object(je.a)(d,2),f=j[0],h=j[1],g=function(e,t){return s.get(e).contents.some((function(e){return e.contentId===t.contentId}))};return Object(R.jsx)(fe.a,{openOnTriggerClick:!0,openOnTriggerMouseEnter:!1,closeOnTriggerMouseLeave:!1,trigger:Object(R.jsx)(Oe.a,{content:"Add to Collection"}),children:Object(R.jsx)(he.a,{children:Object(R.jsxs)(nt.a,{children:[!f&&function(){var e=[];return s.forEach((function(t,n){t.creatorUsername===u&&e.push(t)})),e}().map((function(e){return Object(R.jsxs)(nt.a.Item,{children:[g(e.collectionId,n)?Object(R.jsx)(F.a,{name:"minus circle",color:"red",link:!0,onClick:function(){return l(e.collectionId,n)}}):Object(R.jsx)(F.a,{name:"add circle",color:"green",link:!0,onClick:function(){return i(e.collectionId,n)}}),Object(R.jsx)(rt.a,{children:e.collectionName})]},e.collectionId)})),f&&Object(R.jsx)(ct,{contentUrl:n.contentUrl}),Object(R.jsxs)(nt.a.Item,{className:"label",children:[Object(R.jsx)(F.a,{name:"add square",color:"blue",link:!0,onClick:function(){h(!f)}}),Object(R.jsx)(rt.a,{children:"Create new collection"})]},"toggleCreateMode")]})})})})),st=Object(D.a)((function(e){var t=e.contentUrl,n=I().contentStore,r=n.toggleContentSaved,a=n.savedContents.some((function(e){return e.contentUrl===t}))?"Unsave":"Save";return Object(R.jsx)(Oe.a,{className:"label",onClick:function(){r(t)},content:a})})),it=Object(D.a)((function(e){var t=e.content;return t.contentTags?Object(R.jsxs)("div",{className:"hfex-basic",children:[t.contentTags.map((function(e){return Object(R.jsx)(Le.a,{content:e,className:"tag-button",as:M.b,to:"../tags/".concat(e)},e)})),Object(R.jsx)(Ce,{content:t})]}):Object(R.jsx)("div",{})})),lt=Object(D.a)((function(e){var t=e.dto,n=I().termStore;return console.log("Content ID is: "+t.contentUrl),Object(R.jsxs)(ze.a,{children:[Object(R.jsx)(ve.a,{children:t.contentName}),Object(R.jsxs)("div",{style:{padding:"10px"},children:[Object(R.jsx)(Le.a,{children:t.contentType}),Object(R.jsxs)(Le.a,{children:["Section ",t.bookmark+1," of ",t.numSections]}),Object(R.jsx)(st,{contentUrl:t.contentUrl})]}),Object(R.jsx)(it,{content:t}),Object(R.jsxs)("div",{style:{padding:"10px"},children:[Object(R.jsx)(Oe.a,{as:M.b,color:"twitter",to:"../viewer/".concat(t.contentId,"/"),onClick:function(){return n.selectContentByIdAsync(t.contentId)},children:"View"}),Object(R.jsx)(ot,{content:t})]})]})})),ut=Object(D.a)((function(e){var t=e.dto,n=I().feedStore.allContents.find((function(e){return e.contentUrl===t.contentUrl}));return n?Object(R.jsx)(lt,{dto:n}):Object(R.jsx)("div",{})})),dt=Object(D.a)((function(){var e=I().contentStore,t=e.savedContents;return e.savedContentsLoaded?Object(R.jsxs)("div",{children:[Object(R.jsx)(ve.a,{as:"h2",content:"Saved Contents"}),Object(R.jsx)(ze.a,{children:t.map((function(e){return Object(R.jsx)(ut,{dto:e},e.savedContentId)}))})]}):Object(R.jsx)(He.a,{active:!0})})),jt=Object(D.a)((function(){var e=Object(U.g)().lang,t=I().userStore,n=t.setSelectedLanguage,r=t.selectedProfile;return Object(c.useEffect)((function(){n(e),console.log(r)}),[e,n,r]),Object(R.jsxs)(E.a,{children:[(null===r||void 0===r?void 0:r.languageProfileId)?Object(R.jsx)(tt,{profileId:null===r||void 0===r?void 0:r.languageProfileId}):Object(R.jsx)(He.a,{active:!0}),Object(R.jsx)(dt,{})]})})),ft=(n(333),Object(D.a)((function(e){var t=e.content,n=e.collectionId,r=e.isOwned,a="../content/".concat(t.contentId,"/").concat(t.bookmark),c=I().collectionStore.removeFromCollection;return Object(R.jsxs)(ze.a,{className:"hflex-space-between",children:[Object(R.jsx)(ve.a,{as:M.b,to:a,content:t.contentName}),r&&Object(R.jsx)(Oe.a,{basic:!0,onClick:function(){c(n,t)},children:"Remove"})]})}))),ht=Object(D.a)((function(e){var t=e.collection,n=Object(c.useState)(!0),r=Object(je.a)(n,2),a=r[0],o=r[1],s=I(),i=s.userStore.user,l=s.collectionStore.deleteCollection,u=t.creatorUsername===(null===i||void 0===i?void 0:i.username);return Object(R.jsxs)("div",{className:"collection-container",children:[Object(R.jsxs)("div",{className:"hflex-headers",children:[Object(R.jsx)("h2",{className:"collection-header",children:t.collectionName}),u&&Object(R.jsx)(F.a,{name:"trash",color:"red",link:!0,onClick:function(){return l(t.collectionId)},style:{order:3}})]}),Object(R.jsx)("p",{className:"p-description",children:t.description}),Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"hflex-basic",children:[Object(R.jsx)("h3",{className:"collection-subhead",children:"".concat(t.contents.length," items")}),Object(R.jsx)(F.a,{className:"collection-subhead",name:a?"minus circle":"add circle",link:!0,onClick:function(){console.log("changing expansion..."),o(!a),console.log("Expanded: ".concat(a))}})]}),a&&t.contents.map((function(e){return Object(R.jsx)(ft,{content:e,isOwned:u,collectionId:t.collectionId},e.contentId)}))]})]})})),gt=Object(D.a)((function(){var e=Object(U.g)().lang,t=I().collectionStore,n=t.collectionsLoaded,r=t.currentCollections,a=t.currentCollectionsLanguage,o=t.loadCollectionsForLanguage;Object(c.useEffect)((function(){e===a&&n||o(e)}),[e,n,a,o]);var s=function(e){var t=[];return e.forEach((function(e,n){t.push(e)})),t}(r);return Object(R.jsx)("div",{children:s.map((function(e){return Object(R.jsx)(ht,{collection:e},e.collectionId)}))})})),bt=n(645),mt=n(638),vt=Object(D.a)((function(){var e=Object(U.g)().tag||"null",t=I().tagStore,n=t.currentTag,r=t.loadTag,a=t.tagContents,o=t.tagContentsLoaded;return Object(c.useEffect)((function(){o&&(null===n||void 0===n?void 0:n.tagValue)===e||r(e)}),[o,n,r,e]),o?Object(R.jsxs)(bt.a,{children:[Object(R.jsx)(bt.a.Column,{width:"3"}),Object(R.jsxs)(bt.a.Column,{width:"10",children:[Object(R.jsx)(ve.a,{as:"h2",content:"Contents with tag '".concat(e,"':")}),Object(R.jsx)(mt.a,{children:Object(R.jsx)(mt.a.Group,{divided:!0,children:a.map((function(e){return Object(R.jsx)(lt,{dto:e},e.contentUrl)}))})})]}),Object(R.jsx)(bt.a.Column,{width:"3"})]}):Object(R.jsx)(He.a,{active:!0})})),pt=n(379),Ot=n(71);n(337),n(270);function xt(e){var t=e.term;return Object(R.jsx)("p",{className:"character-group",children:t.trailingCharacters})}function Ct(e){var t=e.term;return Object(R.jsx)("p",{className:"character-group",children:t.leadingCharacters})}function Tt(e,t,n){return e+(t-e)*n}var yt=Object(D.a)((function(e){var t=e.term,n=e.style,r=I().termStore,a=r.selectTerm,o=r.selectedTerm,s=r.phraseTerms,i=function(e){if(e.hasUserTerm){var t=[255,255,255],n=[10,170,211],r=e.rating/6,a=Tt(n[0],t[0],r),c=Tt(n[1],t[1],r),o=Tt(n[2],t[2],r);return"rgb(".concat(a,", ").concat(c,", ").concat(o,")")}return"rgb (255, 255, 255)"}(t),l=o===t||s.some((function(e){return e===t})),u=function(e){var t=Object(c.useState)(!1),n=Object(je.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){var t=function(t){return a(e(t))},n=function(t){return a(e(t))};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}}),[e]),r}((function(e){return e.shiftKey})),d=l?{background:i,borderStyle:"solid",alignContent:"center"}:{background:i},j=Object(k.a)(Object(k.a)({},d),n);return t.termValue.length<1?Object(R.jsx)("span",{}):Object(R.jsx)("button",{className:"word-component",onClick:function(){return a(t,u)},style:j,children:t.termValue})})),St=Object(D.a)((function(e){var t=e.term,n=e.style;return Object(R.jsxs)(R.Fragment,{children:["none"!==t.leadingCharacters&&Object(R.jsx)(Ct,{term:t}),Object(R.jsx)(yt,{term:t,style:n}),"none"!==t.trailingCharacters&&Object(R.jsx)(xt,{term:t})]})})),wt=Object(D.a)((function(e){var t=e.terms,n=e.style;return Object(R.jsx)(R.Fragment,{children:t.abstractTerms.map((function(e){return Object(R.jsx)(St,{tag:t.tag||"span",term:e,style:n},e.indexInChunk+1)}))})})),kt=n(380),Lt=n(381),Nt=function e(t){var n,r="",a=Object(O.a)(t.children);try{for(a.s();!(n=a.n()).done;){var c=n.value;c.type===kt.ElementType.Text?r+=c.data:c instanceof Ot.Element&&(r+=e(c))}}catch(o){a.e(o)}finally{a.f()}return r},Pt=Object(D.a)((function(e){var t=e.sourceNode,n=e.className,r=Object(Lt.a)({threshold:.1}),a=r.ref,o=r.inView,s=Nt(t),i=I().termStore,l=i.elementTermMap,u=i.loadElementAsync;if(Object(c.useEffect)((function(){!l.has(s)&&t instanceof Ot.Element&&s.length>1&&o&&u(s,t.tagName)}),[u,s,l,t,o]),!(t instanceof Ot.Element))return Object(R.jsx)(R.Fragment,{});var d=Object(k.a)({},t.attribs),j=t instanceof Ot.Element&&l.has(s)?Object(R.jsx)(wt,{terms:l.get(s)}):Object(R.jsx)(R.Fragment,{children:s});switch(t.tagName){case"p":return Object(R.jsx)("div",Object(k.a)(Object(k.a)({className:n||"codex-element-p",style:d},t.attribs),{},{ref:a,children:j}));case"h1":return Object(R.jsx)("h1",Object(k.a)(Object(k.a)({className:n||"codex-element-h1",ref:a,style:d},t.attribs),{},{children:j}));case"h2":return Object(R.jsx)("h2",{className:n||"codex-element-h2",ref:a,style:d,children:j});case"h3":return Object(R.jsx)("h3",{className:n||"codex-element-h3",ref:a,style:d,children:j});case"a":case"div":return Object(R.jsx)("div",{className:n||"codex-element-div",ref:a,style:d,children:j});case"span":return Object(R.jsx)("span",{className:n||"codex-element-span",ref:a,children:j});case"li":return Object(R.jsx)("li",{className:n||"codex-element-li",ref:a,children:j});case"td":return Object(R.jsx)("td",{className:n||"codex-element-span",ref:a,children:j});case"th":return Object(R.jsx)("th",{className:n||"codex-element-span",ref:a,children:j});default:return Object(R.jsx)("div",{className:n||"codex-element-div",ref:a,children:j})}})),It=Object(D.a)((function(e){var t=e.contentId,n=I(),r=n.articleStore,a=r.loadPage,o=r.currentPageHtml,s=r.htmlLoaded,i=n.termStore.selectedContent;Object(c.useEffect)((function(){s&&"null"!==i.contentName&&i.contentId===t||a(t)}),[a,s,t,i]);var l,u=1;return null!==o&&s?Object(R.jsx)(V.a,{children:Object(R.jsxs)("div",{className:"content-frame",children:[o.stylesheetUrls.map((function(e){return Object(R.jsx)("link",{rel:"stylesheet",href:e,typeof:"text/css"},e)})),(l=o.html,Object(pt.a)(l,{replace:function(e){if(e instanceof Ot.Element&&e.attributes){if(++u,"mw-editsection"===e.attribs.class)return Object(R.jsx)("div",{});if("true"===e.attribs.codex_replacable)return Object(R.jsx)(Pt,{sourceNode:e},"elementNode".concat(u))}}}))]})}):Object(R.jsx)(He.a,{active:!0})})),Ut=Object(D.a)((function(){var e=I(),t=e.termStore,n=e.contentStore,r=t.selectedAbstractPhrase,a={language:(null===r||void 0===r?void 0:r.language)||"en",value:(null===r||void 0===r?void 0:r.value)||"null",firstTranslation:(null===r||void 0===r?void 0:r.reccomendedTranslation)||"null"};return null===r?Object(R.jsx)(He.a,{active:!0}):Object(R.jsx)(Oe.a,{onClick:function(){n.createPhrase(a)},children:r.reccomendedTranslation})})),Vt=Object(D.a)((function(){var e=I(),t=e.contentStore,n=e.userStore.selectedProfile,r=t.phraseTerms,a=t.createPhrase,c=function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r.leadingCharacters.length>0&&(t+=r.termValue),t+=r.termValue,r.trailingCharacters.length>0&&(t+=r.trailingCharacters),t+=" "}return t}(r);return Object(R.jsx)(ke.d,{initialValues:{firstTranslation:" "},onSubmit:function(e){return t=e.firstTranslation,void a({value:c,language:(null===n||void 0===n?void 0:n.language)||"en",firstTranslation:t});var t},children:function(e){var t=e.handleSubmit,n=e.isSubmitting;return Object(R.jsxs)(ke.c,{className:"ui form",onSubmit:t,children:[Object(R.jsx)(ve.a,{as:"h2",content:"Create phrase: "}),Object(R.jsx)(Pe,{name:"firstTranslation",placeholder:""}),Object(R.jsx)(Oe.a,{content:"Create phrase",loading:n})]})}})})),Mt=Object(D.a)((function(){var e=I().termStore.selectedAbstractPhrase;return null===e?Object(R.jsx)(He.a,{active:!0}):Object(R.jsxs)("div",{children:[Object(R.jsx)(ve.a,{as:"h2",content:e.value}),Object(R.jsx)(Ut,{}),Object(R.jsx)(Vt,{})]})}));n(126);function At(e){var t=e.phrase;return Object(R.jsxs)("div",{className:"details-div",children:[Object(R.jsx)(ve.a,{as:"h2",content:t.value}),Object(R.jsx)(nt.a,{children:t.translations.map((function(e){return Object(R.jsx)(nt.a.Item,{children:e},e)}))})]})}var Et=Object(D.a)((function(){var e=I().termStore,t=e.selectedAbstractPhrase,n=e.updatePhraseAsync;return Object(c.useEffect)((function(){n()}),[n]),null===t?Object(R.jsx)(He.a,{active:!0}):t.hasPhrase&&t.phrase?Object(R.jsx)(At,{phrase:t.phrase}):Object(R.jsx)(Mt,{})})),Ft=Object(D.a)((function(e){var t=e.term,n=I(),r=n.userStore,a=n.termStore,o=a.selectedTerm,s=a.selectTerm;Object(c.useEffect)((function(){(null===o||void 0===o?void 0:o.termValue)!==t.termValue&&s(t)}),[o,s,t]);var i=r.createTerm,d=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.termValue!==(null===o||void 0===o?void 0:o.termValue)&&(console.log("Warning! submitted term ".concat(t.termValue," does not match selected term ").concat(null===o||void 0===o?void 0:o.termValue)),t.termValue=null===o||void 0===o?void 0:o.termValue,t.language=null===o||void 0===o?void 0:o.language,console.log("Submitting term is now: ".concat(t.termValue," with language ").concat(null===o||void 0===o?void 0:o.language))),e.next=3,i(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsx)(ke.d,{initialValues:{language:null===o||void 0===o?void 0:o.language,termValue:null===o||void 0===o?void 0:o.termValue,firstTranslation:"",error:null},onSubmit:function(e,t){var n=t.setErrors;return d(e).catch((function(e){return n(e)}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(R.jsxs)(ke.c,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(R.jsx)(Pe,{name:"firstTranslation",placeholder:"First Translation"}),Object(R.jsx)(ke.a,{name:"error",render:function(){return Object(R.jsx)(Le.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(R.jsx)(Oe.a,{loading:n,content:"Add Term",type:"submit",fluid:!0,style:oe.PrimaryLight})]})}})})),Dt=Object(D.a)((function(e){var t=e.term,n=I().termStore.addTranslation,r=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===t.userTermId?console.log("Term is undefned!"):n(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsx)(ke.d,{initialValues:{userTermId:null===t||void 0===t?void 0:t.userTermId,newTranslation:"",error:null},onSubmit:function(e,t){var n=t.setErrors;return r(e).catch((function(e){return n(e)}))},children:function(e){var t=e.handleSubmit,n=e.isSubmitting,r=e.errors;return Object(R.jsxs)(ke.c,{className:"ui form",onSubmit:t,autoComplete:"off",children:[Object(R.jsx)(Pe,{name:"newTranslation",placeholder:"New Translation"}),Object(R.jsx)(ke.a,{name:"error",render:function(){return Object(R.jsx)(Le.a,{style:{marginBottom:10},basic:!0,color:"red",content:r.error})}}),Object(R.jsx)(Oe.a,{loading:n,style:oe.PrimaryLight,content:"Add Translation",type:"submit",fluid:!0})]})}})})),Wt=Object(D.a)((function(e){var t=e.ratingValue,n=e.term,r=I().userStore.updateUserTerm,a=n.rating===t?oe.SecondaryLight:oe.Secondary;return Object(R.jsx)("button",{onClick:function(){var e=Object(k.a)({},n);e.rating=t,console.log(e),r(e),console.log("New Rating: ".concat(t))},className:"rating-button",style:a,children:t})})),qt=Object(D.a)((function(){var e=I().termStore.selectedTerm;return Object(R.jsxs)("div",{className:"hflex-basic",children:[Object(R.jsx)(Wt,{term:e,ratingValue:1},1),Object(R.jsx)(Wt,{term:e,ratingValue:2},2),Object(R.jsx)(Wt,{term:e,ratingValue:3},3),Object(R.jsx)(Wt,{term:e,ratingValue:4},4),Object(R.jsx)(Wt,{term:e,ratingValue:5},5)]})})),Bt=Object(D.a)((function(e){var t=e.value,n=e.term;console.log("Translation has value ".concat(t));var r=I().userStore.deleteTranslation;return Object(R.jsx)(nt.a.Item,{children:Object(R.jsxs)(nt.a.Content,{children:[Object(R.jsx)(Oe.a,{floated:"right",icon:"close",size:"mini",onClick:function(){return r({value:t,userTermId:n.userTermId})},disabled:n.translations.length<2}),Object(R.jsx)(nt.a.Header,{as:"h3",className:"details-h2",children:t})]})})})),Gt=Object(D.a)((function(){var e=I().termStore.selectedTerm;return Object(R.jsxs)("div",{children:[Object(R.jsx)(ve.a,{as:"h3",content:"Translations",className:"details-h2"}),Object(R.jsx)(nt.a,{children:e.translations.map((function(t){return Object(R.jsx)(Bt,{term:e,value:t},t)}))}),Object(R.jsx)(qt,{}),Object(R.jsx)(ve.a,{as:"h3",content:"Add Translation",className:"details-h2"}),Object(R.jsx)(Dt,{term:e})]})})),Rt=Object(D.a)((function(){var e=I(),t=e.contentStore.selectedTerm,n=e.userStore.updateUserTerm;return Object(R.jsx)(Oe.a,{icon:"star",size:"mini",floated:"right",active:null===t||void 0===t?void 0:t.starred,onClick:function(){var e=Object(k.a)({},t);console.log(e),e.starred=!e.starred,n(e)}})})),Ht=Object(D.a)((function(e){var t=e.term,n=I(),r=n.userStore,a=n.translationStore,o=r.user,s=r.createTerm,i=a.loadReccomended,d=a.reccomendedTranslation,j=a.reccomendedLoaded,f=a.currentTermValue;Object(c.useEffect)((function(){var e={queryLanguage:t.language,queryValue:t.value,responseLanguage:o.nativeLanguage};e.queryValue!==f.termValue&&(console.log("Query: ".concat(e.queryValue," Current: ").concat(f.termValue)),i(e))}),[i,t,o,f]);var h=function(){var e=Object(u.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({termValue:t.value,language:t.language,firstTranslation:n.value});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j?Object(R.jsx)(Oe.a,{as:"h4",className:"suggestion-button",style:oe.Secondary,content:d.value,onClick:function(){return h(d)}},d.value):Object(R.jsx)("div",{})})),zt=Object(D.a)((function(e){var t=e.term;return Object(R.jsx)("div",{children:t.hasUserTerm?Object(R.jsxs)("div",{style:oe.Surface,children:[Object(R.jsx)(Rt,{}),Object(R.jsx)(ve.a,{as:"h2",content:t.termValue,className:"details-h2"}),Object(R.jsx)(Gt,{})]}):Object(R.jsxs)("div",{style:oe.Surface,children:[Object(R.jsx)(ve.a,{as:"h2",content:t.termValue,className:"details-h2"}),Object(R.jsx)(ve.a,{as:"h3",sub:!0,content:"Create new term:",className:"details-h2"}),Object(R.jsx)(Ht,{term:{value:t.termValue,language:t.language}}),Object(R.jsx)(Ft,{term:t})]})})})),Kt=Object(D.a)((function(){var e=I().termStore,t=e.selectedTerm,n=e.phraseMode;return Object(R.jsx)("div",{className:"details-container",children:null===t?Object(R.jsx)(ve.a,{content:"No term selected",className:"details-h2"}):n?Object(R.jsx)("div",{className:"deatils-div",style:oe.Surface,children:Object(R.jsx)(Et,{})}):Object(R.jsx)("div",{className:"details-div",style:oe.Surface,children:Object(R.jsx)(zt,{term:t})})})}));function Jt(){var e=Object(U.g)().contentId||"null";return Object(R.jsx)(V.a,{children:Object(R.jsxs)(ue.a,{children:[Object(R.jsx)(de.a,{xs:9,children:Object(R.jsx)(It,{contentId:e})}),Object(R.jsx)(de.a,{xs:3,children:Object(R.jsx)("span",{style:{position:"fixed"},children:Object(R.jsx)(Kt,{})})})]})})}var _t=n(382),Yt=n.n(_t),Qt=Object(D.a)((function(e){var t=e.caption,n=e.onJump,r=I(),a=r.videoStore,o=r.termStore,s=o.elementTermMap,i=o.loadElementAsync,l=a.highlightedCaption,u=t===l;Object(c.useEffect)((function(){s.has(t.captionText)||i(t.captionText,"caption")}),[s,t,i]);var d=s.get(t.captionText);if(!d)return console.log("No terms for caption: ".concat(t.captionText)),Object(R.jsx)("div",{});var j=u?oe.SecondaryLight:oe.Surface;return Object(R.jsx)(ue.a,{style:j,children:Object(R.jsxs)(de.a,{children:[Object(R.jsx)(F.a,{name:"play circle",link:!0,onClick:function(){n(t)}}),d.abstractTerms.map((function(e){return Object(R.jsx)(St,{term:e,tag:"p"},e.indexInChunk)}))]})})})),Xt=Object(D.a)((function(e){var t=e.handleJump,n=I().videoStore,r=n.currentCaptions;return n.currentCaptionsLoaded?(console.log("".concat(r.length," captions currently loaded")),Object(R.jsx)(V.a,{children:r.map((function(e){return Object(R.jsx)(Qt,{caption:e,onJump:t},e.captionText)}))})):Object(R.jsx)("div",{})})),Zt=Object(D.a)((function(){var e=I(),t=e.videoStore,n=e.termStore,r=t.loadForMs,a=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1e3*t,e.next=3,r(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(c.createRef)(),s=Object(c.useState)(!1),i=Object(je.a)(s,2),d=i[0],j=i[1];return Object(R.jsxs)("div",{children:[Object(R.jsx)(Yt.a,{url:n.selectedContent.contentUrl,controls:!0,onSeek:a,onProgress:function(e){a(e.playedSeconds)},onPlay:function(){return j(!0)},onPause:function(){return j(!1)},progressInterval:300,ref:o,playing:d,light:!0}),Object(R.jsx)(Xt,{handleJump:function(e){var t;null===(t=o.current)||void 0===t||t.seekTo(e.startMs||0,"seconds"),j(!0)}})]})})),$t=(n(601),Object(D.a)((function(){var e=Object(U.g)().contentId,t=I(),n=t.termStore,r=n.metadataLoaded,a=n.selectedContent,o=n.selectContentByIdAsync,s=t.userStore,i=s.selectedProfile,l=s.setSelectedLanguage;return Object(c.useEffect)((function(){a.contentId!==e&&o(e),(null===i||void 0===i?void 0:i.language)!==a.language&&l(a.language)}),[e,a,o,i,l]),Object(R.jsx)("div",{className:"container-fluid",children:Object(R.jsxs)("div",{className:"row",children:[Object(R.jsxs)("div",{className:"col-9",children:[Object(R.jsx)("h1",{children:a.contentName}),r&&Object(R.jsx)(Zt,{})]}),Object(R.jsx)("div",{className:"col-3",children:Object(R.jsx)(Kt,{})})]})})}))),en=n(639),tn=Object(D.a)((function(){var e=I().modalStore;return Object(R.jsx)(en.a,{open:e.modal.open,onClose:e.closeModal,size:"mini",children:Object(R.jsx)(en.a.Content,{children:e.modal.body})})})),nn=Object(D.a)((function(){var e=I().userStore,t=e.selectedProfile,n=e.isLoggedIn,r=Object(U.f)();return Object(c.useEffect)((function(){n&&r("/feed/".concat(null===t||void 0===t?void 0:t.language))}),[n,t,r]),Object(R.jsx)("div",{})}));var rn=function(){var e="/"!==Object(U.e)().pathname,t=I(),n=t.commonStore,r=t.userStore;return Object(c.useEffect)((function(){n.token?(r.getUser().finally((function(){n.setAppLoaded()})),n.setAppLoaded()):n.setAppLoaded()}),[n,r]),Object(R.jsxs)("div",{children:[Object(R.jsx)(tn,{}),e&&Object(R.jsx)(le,{}),Object(R.jsx)(V.a,{style:{margin:e?"7em":"0em"},children:Object(R.jsxs)(U.c,{children:[Object(R.jsx)(U.a,{path:"/feed/:lang",element:Object(R.jsx)(we,{})}),Object(R.jsx)(U.a,{path:"/feed",element:Object(R.jsx)(nn,{})}),Object(R.jsx)(U.a,{path:"/",element:Object(R.jsx)(Ae,{})}),Object(R.jsx)(U.a,{path:"/profiles/:username/:lang",element:Object(R.jsx)(jt,{})}),Object(R.jsx)(U.a,{path:"account/login",element:Object(R.jsx)(Ie,{})}),Object(R.jsx)(U.a,{path:"account/register",element:Object(R.jsx)(Re,{})}),Object(R.jsx)(U.a,{path:"/collections/:lang",element:Object(R.jsx)(gt,{})}),Object(R.jsx)(U.a,{path:"tags/:tag",element:Object(R.jsx)(vt,{})}),Object(R.jsx)(U.a,{path:"viewer/:contentId",element:Object(R.jsx)(Jt,{})}),Object(R.jsx)(U.a,{path:"video/:contentId",element:Object(R.jsx)($t,{})})]})})]})},an=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,648)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};n(602);a.a.render(Object(R.jsx)(P.Provider,{value:N,children:Object(R.jsx)(M.a,{children:Object(R.jsx)(rn,{})})}),document.getElementById("root")),an()}},[[604,1,2]]]);
//# sourceMappingURL=main.8dd4cab1.chunk.js.map